syntax = "proto3";
package plugin.identity_management.v1;

service IdentityManagementService {
  rpc GetGroup(GetGroupRequest) returns (GetGroupResponse);
  rpc GetAllGroups(GetAllGroupsRequest) returns (GetAllGroupsResponse);
  rpc GetUsersForGroup(GetUsersForGroupRequest) returns (GetUsersForGroupResponse);
  rpc GetGroupsForUser(GetGroupsForUserRequest) returns (GetGroupsForUserResponse);
}

message AuthContext {
  map<string, string> data = 1;
}

message GetGroupRequest {
  string group_name = 1;
  AuthContext auth_context = 99;
}

message GetGroupResponse {
  Group group = 1;
}

message GetAllGroupsRequest {
  AuthContext auth_context = 99;
}

message GetAllGroupsResponse {
  repeated Group groups = 1;
}

message GetUsersForGroupRequest {
  string group_id = 1;
  AuthContext auth_context = 99;
}

message GetUsersForGroupResponse {
  repeated User users = 1;
}

message User {
  string id = 1;
  string name = 2;
  string email = 3;
}

message GetGroupsForUserRequest {
  string user_id = 1;
  AuthContext auth_context = 99;
}

message GetGroupsForUserResponse {
  repeated Group groups = 1;
}

message Group {
  string id = 1;
  string name = 2;
}
