syntax = "proto3";
package plugin.identity_management.v1;

service IdentityManagement {
  rpc GetGroup(GetGroupRequest) returns (GetGroupResponse);
  rpc ListGroups(ListGroupsRequest) returns (ListGroupsResponse);
  rpc ListGroupUsers(ListGroupUsersRequest) returns (ListGroupUsersResponse);
  rpc ListUserGroups(ListUserGroupsRequest) returns (ListUserGroupsResponse);
}

message AuthContext {
  map<string, string> data = 1;
}

message GetGroupRequest {
  string group_name = 1;
  AuthContext auth_context = 99;
}

message GetGroupResponse {
  Group group = 1;
}

message ListGroupsRequest {
  AuthContext auth_context = 99;
}

message ListGroupsResponse {
  repeated Group groups = 1;
}

message ListGroupUsersRequest {
  string group_id = 1;
  AuthContext auth_context = 99;
}

message ListGroupUsersResponse {
  repeated User users = 1;
}

message User {
  string id = 1;
  string name = 2;
  string email = 3;
}

message ListUserGroupsRequest {
  string user_id = 1;
  AuthContext auth_context = 99;
}

message ListUserGroupsResponse {
  repeated Group groups = 1;
}

message Group {
  string id = 1;
  string name = 2;
}
